{"version":3,"sources":["webpack:///./src/views/front/UserProduct.vue","webpack:///./src/views/front/UserProduct.vue?c599"],"names":["class","aria-label","aria-current","id","data-ride","active","isLoading","to","product","title","src","imageUrl","alt","content","description","price","origin_price","$filters","currency","type","addToCart","randomProducts","item","key","style","getRandomInt","max","Math","floor","random","data","products","methods","getProduct","api","this","$http","get","then","response","success","getProducts","url","res","console","log","getLookAlike","category","filterProducts","filter","maxSize","length","arrSet","Set","size","index","num","add","forEach","i","push","qty","cart","product_id","post","$httpMessageState","emitter","emit","created","$route","params","render"],"mappings":"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","file":"js/chunk-2d21f86b.5abe5b83.js","sourcesContent":["<template>\n  <Loading :active=\"isLoading\"></Loading>\n  <div class=\"container\">\n    <nav aria-label=\"breadcrumb\">\n      <ol class=\"breadcrumb\">\n        <li class=\"breadcrumb-item \"><router-link to=\"/products\">產品列表</router-link></li>\n        <li class=\"breadcrumb-item active\" aria-current=\"page\">{{ product.title }}</li>\n        <li class=\"breadcrumb-item active\" aria-current=\"page\">產品細節</li>\n      </ol>\n    </nav>\n\n    <!-- 模板 -->\n    <div class=\"row align-items-center\">\n      <div class=\"col-md-7\">\n        <div id=\"carouselExampleControls\" class=\"carousel slide\" data-ride=\"carousel\">\n          <div class=\"carousel-inner\">\n            <div class=\"carousel-item active\">\n              <img :src=\"product.imageUrl\" alt=\"\" class=\"img-fluid mb-3\" />\n            </div>\n            <!-- <div class=\"carousel-item\">\n              <img\n                src=\"https://images.unsplash.com/photo-1502743780242-f10d2ce370f3?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=1916&amp;q=80\"\n                class=\"d-block w-100\"\n                alt=\"...\"\n              />\n            </div>\n            <div class=\"carousel-item\">\n              <img\n                src=\"https://images.unsplash.com/photo-1502743780242-f10d2ce370f3?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=1916&amp;q=80\"\n                class=\"d-block w-100\"\n                alt=\"...\"\n              />\n            </div> -->\n          </div>\n          <!-- <a\n            class=\"carousel-control-prev\"\n            href=\"#carouselExampleControls\"\n            role=\"button\"\n            data-slide=\"prev\"\n          >\n            <span class=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span>\n            <span class=\"sr-only\">Previous</span>\n          </a>\n          <a\n            class=\"carousel-control-next\"\n            href=\"#carouselExampleControls\"\n            role=\"button\"\n            data-slide=\"next\"\n          >\n            <span class=\"carousel-control-next-icon\" aria-hidden=\"true\"></span>\n            <span class=\"sr-only\">Next</span>\n          </a> -->\n        </div>\n      </div>\n      <div class=\"col-md-5\">\n        <!-- <nav aria-label=\"breadcrumb\">\n          <ol class=\"breadcrumb bg-white px-0 mb-0 py-3\">\n            <li class=\"breadcrumb-item\"><router-link to=\"/products\">產品列表</router-link></li>\n            <li class=\"breadcrumb-item active\" aria-current=\"page\">{{ product.title }}</li>\n            <li class=\"breadcrumb-item active\" aria-current=\"page\">產品細節</li>\n          </ol>\n        </nav> -->\n        <article class=\"col\">\n          <h2>{{ product.title }}</h2>\n          <div>{{ product.content }}</div>\n          <div>{{ product.description }}</div>\n        </article>\n        <div class=\"h5\" v-if=\"!product.price\">{{ product.origin_price }} 元</div>\n        <del class=\"h6\" v-if=\"product.price\"\n          >原價 {{ $filters.currency(product.origin_price) }} 元</del\n        >\n        <div class=\"h5 text-danger\" v-if=\"product.price\">\n          現在只要 {{ $filters.currency(product.price) }} 元\n        </div>\n        <div class=\"row align-items-center\">\n          <div class=\"col-6\">\n            <div class=\"input-group my-3 bg-light rounded\">\n              <div class=\"input-group-prepend\">\n                <button class=\"btn btn-outline-dark border-0 py-2\" type=\"button\" id=\"button-addon1\">\n                  <i class=\"fas fa-minus\"> - </i>\n                </button>\n              </div>\n              <input\n                type=\"text\"\n                class=\"form-control border-0 text-center my-auto shadow-none bg-light\"\n                placeholder=\"\"\n                aria-label=\"Example text with button addon\"\n                aria-describedby=\"button-addon1\"\n                value=\"1\"\n              />\n              <div class=\"input-group-append\">\n                <button class=\"btn btn-outline-dark border-0 py-2\" type=\"button\" id=\"button-addon2\">\n                  <i class=\"fas fa-plus\"> + </i>\n                </button>\n              </div>\n            </div>\n          </div>\n          <div class=\"col-6\">\n            <button\n              type=\"button\"\n              class=\"text-nowrap btn btn-dark w-100 py-2\"\n              @click.prevent=\"addToCart(product.id)\"\n            >\n              加到購物車\n            </button>\n\n            <!-- 原版本加入購物車 -->\n            <!-- <a\n              href=\"#\"\n              class=\"text-nowrap btn btn-dark w-100 py-2\"\n              @click.prevent=\"addToCart(product.id)\"\n              >加到購物車</a\n            > -->\n          </div>\n          <!-- <button type=\"button\" class=\"btn btn-outline-danger\" @click=\"addToCart(product.id)\">\n            加到購物車\n          </button> -->\n        </div>\n      </div>\n      <!-- 你可能也喜歡 -->\n      <h2>你可能也喜歡</h2>\n      <div class=\"row row-cols-1 row-cols-md-3 g-4 mb-4\">\n        <div class=\"col\" v-for=\"item in randomProducts\" :key=\"item\">\n          <div class=\"card h-100 \">\n            <img\n              :src=\"item.imageUrl\"\n              style=\"background-size: cover;\n              background-position: center center\"\n              class=\"card-img-top\"\n              alt=\"...\"\n            />\n            <div class=\"card-body\">\n              <h5 class=\"card-title\">{{ item.title }}</h5>\n            </div>\n            <div class=\"card-footer\">\n              <!-- 連結按鈕 待處理區塊 -->\n              <small class=\"text-muted\"> 來去看看 </small>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- 你可能也喜歡 end -->\n    <!-- <ul>\n        <li v-for=\"item in randomProducts\" :key=\"item\">\n          <img :src=\"item.imageUrl\" alt=\"\" class=\"img-fluid mb-3\" />\n          {{ item.title }}\n        </li>\n      </ul>\n    </div> -->\n    <!-- 模板 end -->\n  </div>\n</template>\n\n<script>\nimport emitter from '@/methods/emitter';\n\nfunction getRandomInt(max) {\n  return Math.floor(Math.random() * max);\n}\n\nexport default {\n  data() {\n    return {\n      isLoading: false,\n      product: {},\n      products: [],\n      randomProducts: [],\n      id: '',\n    };\n  },\n  methods: {\n    getProduct() {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/product/${this.id}`;\n      this.isLoading = true;\n      this.$http.get(api).then((response) => {\n        if (response.data.success) {\n          this.product = response.data.product;\n        }\n        this.isLoading = false;\n        this.getProducts();\n      });\n    },\n    // 取得全部產品\n    getProducts() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\n      this.$http.get(url).then((res) => {\n        console.log(res);\n        this.products = res.data.products;\n        this.getLookAlike();\n      });\n    },\n    // 隨機取得同類別產品\n    getLookAlike() {\n      const { category } = this.product;\n      const filterProducts = this.products.filter((item) => item.category === category);\n      console.log('filterProducts:', filterProducts);\n      // 如果 小於4 就用這個 length，否則就用 4\n      const maxSize = filterProducts.length < 4 ? filterProducts.length : 4;\n      const arrSet = new Set([]);\n      console.log(arrSet.size);\n      getRandomInt();\n      for (let index = 0; arrSet.size < maxSize; index + 1) {\n        const num = getRandomInt(filterProducts.length);\n        arrSet.add(num);\n        console.log(arrSet, num);\n      }\n      arrSet.forEach((i) => {\n        this.randomProducts.push(filterProducts[i]);\n      });\n      console.log(this.randomProducts);\n    },\n    addToCart(id, qty = 1) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      const cart = {\n        product_id: id,\n        qty,\n      };\n      this.isLoading = true;\n      this.$http.post(url, { data: cart }).then((response) => {\n        this.isLoading = false;\n        this.$httpMessageState(response, '加入購物車');\n        console.log(response.data);\n        emitter.emit('update-cart'); // 更新購物車數量\n\n        // this.$router.push('/cart');\n      });\n    },\n  },\n  created() {\n    this.id = this.$route.params.id;\n    this.getProduct();\n  },\n};\n</script>\n","import { render } from \"./UserProduct.vue?vue&type=template&id=f4f04280\"\nimport script from \"./UserProduct.vue?vue&type=script&lang=js\"\nexport * from \"./UserProduct.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}